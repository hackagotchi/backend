image: archlinux
packages:
- rustup
- aur/mongodb-bin-4.0
repositories: {}
shell: false
sources:
  - https://github.com/hackagotchi/backend
tasks:
- setup: |
    rustup toolchain install nightly
    cd backend/
    rustup run nightly cargo fetch
- nightly: |
    rustup default nightly
    cd backend/
    cargo build
    sudo systemctl start mongodb
    MONGO_URL=mongodb://localhost:27017 cargo test
    cargo fmt -- --check
